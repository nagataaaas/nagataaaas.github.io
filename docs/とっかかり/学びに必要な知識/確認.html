<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ながた の やるだけPython</title>
    <script src="/static/js/coi-serviceworker.min.js"></script>

    <!--syntax highlight-->
    <link rel="stylesheet"
          href="/static/cdn/highlight.min.css">
    <script src="/static/cdn/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>


    <!--jquery-->
    <script src="/static/cdn/jquery.js"></script>
    <script type="text/javascript" src="/static/cdn/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="/static/cdn/jquery-ui.css">
    <script src="/static/cdn/jquery.terminal.min.js"></script>
    <link href="/static/cdn/jquery.terminal.min.css" rel="stylesheet">


    <!--pyodide-->
    <script src="/static/js/terminal.js"></script>

    <!--style-->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/dracula.css">
    <link rel="stylesheet" href="/static/css/terminal.css">

    <!--style-->
    <script src="/static/js/navigate.js"></script>

</head>
<body>
<div id="terminal-container">
    <div id="terminal-window" class="hidden">

        <div class="header">
            <span> 🐍 Python Interpreter</span>
            <button onclick="closeConsole()"><span class="close-btn">&#8211;</span></button>
        </div>
        <div id="terminal"></div>
    </div>
</div>
<div id="container">
    <div id="navigate"> <span class="chapter"><a href="/はじめに/目的と流れ/index.html">はじめに</a></span>
<span class="section"><a href="/はじめに/目的と流れ/index.html">目的と流れ</a></span>
<span class="chapter"><a href="/とっかかり/学びに必要な知識/index.html">とっかかり</a></span>
<span class="section"><a href="/とっかかり/学びに必要な知識/index.html">学びに必要な知識</a></span>
<span class="page"><a href="/とっかかり/学びに必要な知識/index.html">index</a></span>
<span class="page selected"><a href="/とっかかり/学びに必要な知識/確認.html">確認</a></span>
<span class="chapter"><a href="/型/primitive型/型とは.html">型</a></span>
<span class="section"><a href="/型/primitive型/型とは.html">primitive型</a></span>
</div>
    <div id="main">
        <div id="top">
            <h1 id="title">やるだけPython</h1>
            <h3 id="author" class="right">Yamato Nagata</h3>
            <h3 id="email" class="right"><a href="mailto:nagata@mail.nagata.pro">nagata@mail.nagata.pro</a>
            </h3>
            <h3 class="right">last update: 07/22/2022</h3>
        </div>
        <div id="content">
            <p>import re
import sys
from io import StringIO
from typing import Any</p>
<p>class Capturing(list):
    def <strong>enter</strong>(self):
        self._stdout = sys.stdout
        sys.stdout = self._stringio = StringIO()
        return self</p>
<div class="codehilite"><pre class="language-python"><span></span><code><span class="err">def __exit__(self, *args):</span>
<span class="err">    self.extend(self._stringio.getvalue().splitlines())</span>
<span class="err">    del self._stringio  # free up some memory</span>
<span class="err">    sys.stdout = self._stdout</span>
</code></pre></div>

<p>class Test:
    def <strong>init</strong>(self, name: str, code: str,
                 error_should_raise: list[Exception],
                 should_print: list[str]):
        self.name = name
        self.code = code
        self.error_should_raise = error_should_raise
        self.should_print: list[re.Pattern] = [re.compile(p) for p in should_print]</p>
<div class="codehilite"><pre class="language-python"><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">check_print</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">print_lines</span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">any</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="k">match</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">should_print</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">print_lines</span><span class="p">)</span><span class="w"></span>

<span class="n">def</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">test_globals</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="o">[</span><span class="n">str, Any</span><span class="o">]</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nl">test_locals</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="o">[</span><span class="n">str, Any</span><span class="o">]</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="k">with</span><span class="w"> </span><span class="n">Capturing</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">output</span><span class="err">:</span><span class="w"></span>
<span class="w">        </span><span class="k">try</span><span class="err">:</span><span class="w"></span>
<span class="w">            </span><span class="k">exec</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">test_globals</span><span class="p">,</span><span class="w"> </span><span class="n">test_locals</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">check_print</span><span class="p">(</span><span class="k">output</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="ow">except</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">error_should_raise</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">check_print</span><span class="p">(</span><span class="k">output</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="ow">except</span><span class="err">:</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">False</span><span class="w"></span>
</code></pre></div>

<h1 id="test">test</h1>
<p>tests = [
    Test
]</p>
        </div>
    </div>
</div>


<!--inject Run button-->
<script>
    document.querySelectorAll('pre > code').forEach(e => {
        const button = document.createElement('button');
        button.classList.add('run-button');
        button.innerText = 'RUN';
        e.parentNode.insertBefore(button, e);
    })
</script>
</body>
</html>